<!doctype html>
<html lang="th">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸„à¸³à¸™à¸§à¸“à¸à¸²à¸£à¹ƒà¸«à¹‰à¸¢à¸² Warfarin à¸«à¹‰à¸­à¸‡à¸¢à¸²à¹‚à¸£à¸‡à¸à¸¢à¸²à¸šà¸²à¸¥à¸à¸¸à¸™à¸à¸´à¸™</title>
<link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;600&display=swap" rel="stylesheet">
<style>
/* --- COPY PROTECTION STYLES (à¹€à¸”à¸´à¸¡) --- */
body {
Â  Â  user-select: none; /* Standard syntax */
Â  Â  -webkit-user-select: none; /* Safari */
Â  Â  -moz-user-select: none; /* Firefox */
Â  Â  -ms-user-select: none; /* IE/Edge */
Â  Â  background:linear-gradient(180deg,var(--bg),#FFFFFF);
Â  Â  margin:0;
Â  Â  padding:20px;
Â  Â  color:#263238;
}
/* ------------------------------- */

:root{
Â  Â  --bg:#F0F8FF;Â 
Â  Â  --card:#FFFFFF;
Â  Â  --accent:#00A896;
Â  Â  --accent-light:#CCEEEA;
Â  Â  --muted:#5A6A70;
Â  Â  --highlight:#75C2B9;

Â  Â  --plan-bg-1: #F8FFFF;
Â  Â  --plan-bg-2: #FFFBF8;
Â  Â  --plan-bg-3: #FAF8FF;
Â  Â  --plan-border-1: #40B2D6;
Â  Â  --plan-border-2: #FFAD60;
Â  Â  --plan-border-3: #AA8CFF;

Â  Â  --main-pink: #E91E63;
Â  Â  --light-pink: #FDE8F1;
Â  Â  --accent-green: #4CAF50;
Â  Â  font-family: 'Kanit', sans-serif;
}
body::before{
Â  Â  content: "";
Â  Â  position: fixed;
Â  Â  top: 0;
Â  Â  left: 0;
Â  Â  width: 100%;
Â  Â  height: 100%;
Â  Â  /* à¸ªà¸¡à¸¡à¸¸à¸•à¸´à¸§à¹ˆà¸²à¸„à¸¸à¸“à¸¡à¸µ logo1.gif à¹ƒà¸™ path à¸—à¸µà¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡ */
Â  Â  background: url('logo1.gif') center center no-repeat;Â 
Â  Â  background-size: 380px auto;
Â  Â  opacity: 0.06;
Â  Â  z-index: -1;
}
header{display:flex;align-items:center;gap:12px}
h1{margin:0;font-size:20px;text-align:center;flex:1;color:var(--accent)}
.container{max-width:980px;margin:20px auto}
.card{background:var(--card);border-radius:16px;box-shadow:0 4px 14px rgba(0,0,0,0.08);padding:18px;margin-bottom:16px;border-top:4px solid var(--highlight)}
label{display:block;font-size:14px;margin-bottom:6px;color:var(--muted)}
input[type=number]{width:100%;padding:10px;border-radius:10px;border:1px solid #cfd8dc;font-size:16px;background:#FAFAFA;}
.row{display:flex;gap:12px}
.col{flex:1}
.radio-row{display:flex;gap:10px;flex-wrap:wrap}
.pill{padding:8px 14px;border-radius:20px;border:1px solid #B2DFDB;background:#E0F2F1;cursor:pointer;transition:all 0.2s ease}
.pill:hover{background:var(--highlight);color:#004D40}
button.primary{background:var(--accent);color:#fff;border:0;padding:12px 20px;border-radius:12px;font-weight:600;cursor:pointer;transition:all 0.2s ease}
button.primary:hover{background:#008F85}
.result{margin-top:12px}
table{width:100%;border-collapse:collapse;border-radius:10px;overflow:hidden; table-layout: fixed; }
th,td{padding:8px;border-bottom:1px solid #E0F2F1;text-align:center; font-size: 14px;}
th{background:var(--accent-light);color:#004D40}
.plan-table tbody tr:nth-child(odd) { background-color: #F8F8F8; }
.plan-table.plan-1 tbody tr:nth-child(odd) { background-color: #F9FFFF; }
.plan-table.plan-2 tbody tr:nth-child(odd) { background-color: #FFFFF9; }
.plan-table.plan-3 tbody tr:nth-child(odd) { background-color: #FCFAFF; }
.small{font-size:13px;color:var(--muted)}
.note{background:var(--accent-light);padding:10px;border-radius:10px;margin-top:8px;white-space:pre-line;color:#004D40}
footer{font-size:13px;color:var(--muted);text-align:center;padding:8px}
@media(max-width:720px){.row{flex-direction:column}}
.plan-section { padding: 15px; margin-top: 15px; border-radius: 12px; border: 1px solid #eee; box-shadow: 0 2px 8px rgba(0,0,0,0.05); overflow-x: auto;}
.plan-section.plan-1 { background-color: var(--plan-bg-1); border-left: 5px solid var(--plan-border-1);}
.plan-section.plan-2 { background-color: var(--plan-bg-2); border-left: 5px solid var(--plan-border-2);}
.plan-section.plan-3 { background-color: var(--plan-bg-3); border-left: 5px solid var(--plan-border-3);}
.plan-table { min-width: 700px; }
.plan-grid { display: flex; justify-content: space-between; gap: 8px; margin-bottom: 16px; overflow-x: auto; padding-bottom: 8px; }
.day-card { min-width: 120px; flex-grow: 1; text-align: center; padding: 10px 5px; border-radius: 12px; border: 1px solid #E0E0E0; box-shadow: 0 2px 4px rgba(0,0,0,0.05); background-color: #FFFFFF; }
.day-name { font-weight: 600; padding: 2px 0; margin-bottom: 4px; border-radius: 8px; color: #333; }
.day-name.mon { background-color: #FFECC6; border: 1px solid #FFC107; color: #333; }
.day-name.tue { background-color: #E6E1F4; border: 1px solid #673AB7; color: #333; }
.day-name.wed { background-color: #E6F7E6; border: 1px solid #4CAF50; color: #333; }
.day-name.thu { background-color: #FEEED7; border: 1px solid #FF9800; color: #333; }
.day-name.fri { background-color: #E1F1FD; border: 1px solid #2196F3; color: #333; }
.day-name.sat { background-color: #FDE8F1; border: 1px solid #E91E63; color: #333; }
.day-name.sun { background-color: #FCE6E6; border: 1px solid #F44336; color: #333; }
.daily-mg { font-size: 14px; color: #4CAF50; font-weight: 500; margin-bottom: 6px; }
.daily-dose-text { font-size: 12px; color: var(--muted); line-height: 1.4; margin-top: 4px; }
.pill-container { display: flex; flex-wrap: wrap; gap: 4px; justify-content: center; align-items: center; padding: 4px 0; min-height: 32px; }
.pill-icon-wrapper { position: relative; display: inline-block; flex-shrink: 1; --pill-size: 24px; }
.pill-icon { width: var(--pill-size); height: var(--pill-size); border-radius: 50%; display: inline-block; cursor: default; box-shadow: 0 1px 3px rgba(0,0,0,0.1); transition: all 0.2s ease; }
.pill-icon-3mg { background-color: #4FC3F7; } /* à¸ªà¸µà¸Ÿà¹‰à¸² */
.pill-icon-2mg { background-color: #FFB74D; } /* à¸ªà¸µà¸ªà¹‰à¸¡ */
.pill-icon-5mg { background-color: var(--main-pink); } /* à¸ªà¸µà¸Šà¸¡à¸à¸¹ (à¹ƒà¸«à¸¡à¹ˆ) */
.half-pill { width: var(--pill-size); height: var(--pill-size); border-radius: 50%; clip-path: polygon(0 0, 50% 0, 50% 100%, 0 100%); }
.pill-container.shrink-pills .pill-icon-wrapper { --pill-size: 18px; gap: 2px; }
.pill-container.shrink-pills .pill-icon-wrapper .tooltip-text { font-size: 10px; }
.pill-icon-wrapper .tooltip-text { visibility: hidden; background-color: #333; color: #fff; text-align: center; border-radius: 6px; padding: 5px 8px; position: absolute; z-index: 10; bottom: 125%; left: 50%; transform: translateX(-50%); white-space: nowrap; opacity: 0; transition: opacity 0.2s; font-size: 12px; }
.pill-icon-wrapper:hover .tooltip-text { visibility: visible; opacity: 1; }
.pill-icon-wrapper .tooltip-text::after { content: ""; position: absolute; top: 100%; left: 50%; margin-left: -5px; border-width: 5px; border-style: solid; border-color: #333 transparent transparent transparent; }
.summary-pill { display: inline-block; width: 14px; height: 14px; border-radius: 50%; margin-right: 5px; box-shadow: 0 1px 2px rgba(0,0,0,0.1); }
.summary-line { font-size: 14px; margin-top: 5px; }

/* --- à¸ªà¹„à¸•à¸¥à¹Œà¸ªà¸³à¸«à¸£à¸±à¸šà¸ªà¹ˆà¸§à¸™à¸„à¸³à¸™à¸§à¸“ Warfarin à¹à¸šà¸šà¸„à¸¹à¸“à¸§à¸±à¸™ (à¹ƒà¸«à¸¡à¹ˆ) --- */
.standalone-calculator {
Â  Â  max-width: 980px;
Â  Â  margin: 20px auto 0;
Â  Â  padding: 18px;
Â  Â  background: var(--card);
Â  Â  border-radius: 16px;
Â  Â  box-shadow: 0 4px 14px rgba(0, 0, 0, 0.08);
Â  Â  border-top: 4px solid var(--main-pink);Â 
}

.calculator-header-new {
Â  Â  font-size: 20px;
Â  Â  font-weight: 600;
Â  Â  color: var(--main-pink);
Â  Â  padding-bottom: 10px;
Â  Â  border-bottom: 2px solid var(--light-pink);
Â  Â  margin-bottom: 15px;
Â  Â  text-align: center;
}

/* à¸ à¸²à¸Šà¸™à¸°à¸«à¸¥à¸±à¸à¸—à¸µà¹ˆà¹ƒà¸Šà¹‰ Flexbox à¹ƒà¸™à¸à¸²à¸£à¸ˆà¸±à¸”à¸§à¸²à¸‡ 2mg, 3mg, 5mg à¹à¸¥à¸° Comparison */
.dosing-comparison-container {
Â  Â  display: flex;
Â  Â  gap: 12px;
}

/* à¸ à¸²à¸Šà¸™à¸°à¸¢à¹ˆà¸­à¸¢à¸ªà¸³à¸«à¸£à¸±à¸š Warfarin 2mg, 3mg, 5mg (à¹ƒà¸«à¹‰à¹à¸šà¹ˆà¸‡à¸à¸·à¹‰à¸™à¸—à¸µà¹ˆà¹€à¸—à¹ˆà¸²à¹† à¸à¸±à¸™) */
.pill-dosing-container {
Â  Â  display: flex;
Â  Â  flex-direction: column; /* à¸ˆà¸±à¸”à¸­à¸‡à¸„à¹Œà¸›à¸£à¸°à¸à¸­à¸šà¹ƒà¸™à¹à¸™à¸§à¸•à¸±à¹‰à¸‡à¸ à¸²à¸¢à¹ƒà¸™à¸à¸£à¸­à¸š */
Â  Â  flex: 1 1 20%; /* à¸›à¸£à¸±à¸šà¹ƒà¸«à¹‰ 4 à¸„à¸­à¸¥à¸±à¸¡à¸™à¹Œà¹€à¸—à¹ˆà¸²à¸à¸±à¸™ à¹‚à¸”à¸¢à¸¡à¸µà¸à¸·à¹‰à¸™à¸—à¸µà¹ˆà¸«à¸¥à¸±à¸à¸¡à¸²à¸à¸à¸§à¹ˆà¸² (20% * 4 = 80%) */
}

.dose-input-group {
Â  Â  margin-bottom: 15px;
Â  Â  padding: 10px;
Â  Â  border-radius: 8px;
Â  Â  flex-grow: 1; /* à¹ƒà¸«à¹‰à¸à¸£à¸­à¸šà¸¢à¸·à¸”à¹€à¸•à¹‡à¸¡à¸„à¸§à¸²à¸¡à¸ªà¸¹à¸‡à¸‚à¸­à¸‡ column */
}

/* ğŸŒŸ à¸ªà¹„à¸•à¸¥à¹Œ Warfarin 2 mg (à¹‚à¸—à¸™à¸ªà¹‰à¸¡) */
#dose2mgContainer {
Â  Â  background: #FFFBF8; /* à¸‚à¸²à¸§à¸­à¸¡à¸ªà¹‰à¸¡ */
Â  Â  border: 1px solid #FFAD60;
}
#dose2mgContainer .pill-section-title {
Â  Â  color: #FFAD60;
Â  Â  border-bottom: 1px dashed #FFDDAA;
}

/* ğŸŒŸ à¸ªà¹„à¸•à¸¥à¹Œ Warfarin 3 mg (à¹‚à¸—à¸™à¸Ÿà¹‰à¸²) */
#dose3mgContainer {
Â  Â  background: #F8FFFF; /* à¸‚à¸²à¸§à¸­à¸¡à¸Ÿà¹‰à¸² */
Â  Â  border: 1px solid #40B2D6;
}
#dose3mgContainer .pill-section-title {
Â  Â  color: #40B2D6;
Â  Â  border-bottom: 1px dashed #A0D0E0;
}

/* ğŸŒŸ à¸ªà¹„à¸•à¸¥à¹Œ Warfarin 5 mg (à¹‚à¸—à¸™à¸Šà¸¡à¸à¸¹/à¹à¸”à¸‡) - à¹ƒà¸«à¸¡à¹ˆ */
#dose5mgContainer {
Â  Â  background: var(--light-pink); /* à¸ªà¸µà¸à¸·à¹‰à¸™à¸«à¸¥à¸±à¸‡à¸Šà¸¡à¸à¸¹à¸­à¹ˆà¸­à¸™ */
Â  Â  border: 1px solid var(--main-pink); /* à¸‚à¸­à¸šà¸ªà¸µà¸Šà¸¡à¸à¸¹à¹€à¸‚à¹‰à¸¡ */
}
#dose5mgContainer .pill-section-title {
Â  Â  color: var(--main-pink); /* à¸•à¸±à¸§à¸­à¸±à¸à¸©à¸£à¸ªà¸µà¸Šà¸¡à¸à¸¹à¹€à¸‚à¹‰à¸¡ */
Â  Â  border-bottom: 1px dashed #FFCCD5; /* à¹€à¸ªà¹‰à¸™à¹ƒà¸•à¹‰à¸ªà¸µà¸Šà¸¡à¸à¸¹à¸­à¹ˆà¸­à¸™ */
}


.dose-input-row {
Â  Â  display: flex;
Â  Â  align-items: center;
Â  Â  gap: 5px;
Â  Â  margin-top: 8px;
Â  Â  font-size: 13px; /* à¸—à¸³à¹ƒà¸«à¹‰à¸à¸°à¸—à¸±à¸”à¸£à¸±à¸”à¸‚à¸¶à¹‰à¸™ */
}

.dose-input-row label {
Â  Â  flex-basis: auto;
Â  Â  font-size: 13px;
Â  Â  color: #333;
Â  Â  margin: 0;
Â  Â  display: block;
Â  Â  white-space: nowrap;
}

.dose-input-row input[type="number"] {
Â  Â  width: 45px; /* à¸¥à¸”à¸‚à¸™à¸²à¸”à¸Šà¹ˆà¸­à¸‡à¸›à¹‰à¸­à¸™à¸•à¸±à¸§à¹€à¸¥à¸‚ */
Â  Â  padding: 6px;
Â  Â  border-radius: 6px;
Â  Â  border: 1px solid #ccc;
Â  Â  text-align: center;
Â  Â  font-size: 13px;
Â  Â  box-sizing: border-box;
Â  Â  height: 30px;
}

.pill-section-title {
Â  Â  font-weight: 600;
Â  Â  margin-bottom: 5px;
Â  Â  padding-bottom: 5px;
Â  Â  text-align: center; /* à¸ˆà¸±à¸”à¹ƒà¸«à¹‰à¸­à¸¢à¸¹à¹ˆà¸•à¸£à¸‡à¸à¸¥à¸²à¸‡à¸‚à¸­à¸‡à¸à¸£à¸­à¸šà¹€à¸¥à¹‡à¸ */
}

.add-row-btn {
Â  Â  background: var(--light-pink);
Â  Â  color: var(--main-pink);
Â  Â  border: 1px solid var(--main-pink);
Â  Â  padding: 6px 10px;
Â  Â  border-radius: 6px;
Â  Â  font-weight: 500;
Â  Â  cursor: pointer;
Â  Â  transition: background-color 0.2s;
Â  Â  margin-top: 5px;
Â  Â  font-size: 12px;
Â  Â  width: 100%; /* à¹ƒà¸«à¹‰à¸›à¸¸à¹ˆà¸¡à¸à¸§à¹‰à¸²à¸‡à¹€à¸•à¹‡à¸¡à¸à¸£à¸­à¸š */
}
.add-row-btn:hover { background: #FFDDEE; }

/* ğŸŒŸ à¸ªà¹ˆà¸§à¸™à¹€à¸›à¸£à¸µà¸¢à¸šà¹€à¸—à¸µà¸¢à¸šà¹à¸¥à¸°à¸à¸²à¸£à¸ˆà¹ˆà¸²à¸¢à¸¢à¸² (à¹‚à¸—à¸™à¸‚à¸²à¸§) */
.comparison-section {
Â  Â  flex: 1 1 30%; /* à¸›à¸£à¸±à¸šà¸à¸·à¹‰à¸™à¸—à¸µà¹ˆà¹ƒà¸«à¹‰à¹€à¸¢à¸­à¸°à¸à¸§à¹ˆà¸²à¹€à¸¥à¹‡à¸à¸™à¹‰à¸­à¸¢ */
Â  Â  padding: 15px;
Â  Â  border-radius: 8px;
Â  Â  background: #FFFFFF; /* à¸ªà¸µà¸à¸·à¹‰à¸™à¸«à¸¥à¸±à¸‡à¸‚à¸²à¸§ */
Â  Â  border: 1px solid #cfd8dc; /* à¸‚à¸­à¸šà¹€à¸—à¸²à¸­à¹ˆà¸­à¸™ */
}

.comparison-section h4 {
Â  Â  margin-top: 0;
Â  Â  color: #40B2D6;
Â  Â  border-bottom: 1px dashed #A0D0E0;
Â  Â  padding-bottom: 5px;
}

.comparison-output {
Â  Â  margin-top: 15px;
Â  Â  padding: 15px;
Â  Â  border: 1px solid #cfd8dc;
Â  Â  border-left: 5px solid var(--accent-green);Â 
Â  Â  border-radius: 8px;Â 
Â  Â  background: #F0FFF0;
}

.comparison-output p {
Â  Â  margin: 5px 0;
Â  Â  font-size: 16px;
Â  Â  line-height: 1.5;
}

.comparison-output strong {
Â  Â  color: var(--accent-green);
Â  Â  font-weight: 700;
Â  Â  font-size: 17px;
}

.action-buttons {
Â  Â  display: flex;
Â  Â  gap: 10px;
Â  Â  margin-top: 20px;
Â  Â  justify-content: flex-end;
}

.action-buttons button {
Â  Â  padding: 10px 15px;
Â  Â  border-radius: 8px;
Â  Â  font-weight: 600;
Â  Â  cursor: pointer;
Â  Â  border: none;
Â  Â  transition: background 0.2s;
}

.calculate-btn {
Â  Â  background: var(--main-pink);
Â  Â  color: white;
}
.calculate-btn:hover { background: #C2185B; }

.clear-btn {
Â  Â  background: #ccc;
Â  Â  color: #333;
}
.clear-btn:hover { background: #B0B0B0; }

@media(max-width:900px){
Â  Â  /* à¸šà¸™à¸«à¸™à¹‰à¸²à¸ˆà¸­à¹€à¸¥à¹‡à¸ à¸ˆà¸±à¸”à¹€à¸£à¸µà¸¢à¸‡à¹€à¸›à¹‡à¸™à¹à¸™à¸§à¸•à¸±à¹‰à¸‡ */
Â  Â  .dosing-comparison-container {
Â  Â  Â  Â  flex-direction: column;
Â  Â  }
Â  Â  .pill-dosing-container {
Â  Â  Â  Â  flex: 1 1 100%;
Â  Â  Â  Â  gap: 12px;
Â  Â  }
Â  Â  .comparison-section {
Â  Â  Â  Â  flex: 1 1 100%;
Â  Â  }
Â  Â  .dose-input-row {
Â  Â  Â  Â  flex-wrap: wrap;Â 
Â  Â  Â  Â  justify-content: space-between;
Â  Â  }
Â  Â  .dose-input-row label {
Â  Â  Â  Â  width: auto;
Â  Â  }
Â  Â  .dose-input-row input[type="number"] {
Â  Â  Â  Â  width: 60px;
Â  Â  }
}
</style>
</head>
<body oncontextmenu="return false;">
<div class="container">
Â  Â Â 
Â  Â  <header class="card" style="align-items:center">
Â  Â  Â  Â  <h1>à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸„à¸³à¸™à¸§à¸“à¸à¸²à¸£à¹ƒà¸«à¹‰à¸¢à¸² Warfarin à¹‚à¸£à¸‡à¸à¸¢à¸²à¸šà¸²à¸¥à¸à¸¸à¸™à¸à¸´à¸™</h1>
Â  Â  </header>
Â  Â  <section class="card">
Â  Â  Â  Â  <form id="form">
Â  Â  Â  Â  Â  Â  <div class="row">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="col">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label>INR à¸›à¸±à¸ˆà¸ˆà¸¸à¸šà¸±à¸™</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="number" step="0.01" id="inr" min="0" value="2.5" required>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="col">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label>à¸‚à¸™à¸²à¸”à¸¢à¸² Warfarin à¸•à¹ˆà¸­à¸ªà¸±à¸›à¸”à¸²à¸«à¹Œ (mg)</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="number" step="0.1" id="weeklyDose" min="0" required>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="col">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label>à¸ˆà¸³à¸™à¸§à¸™à¸§à¸±à¸™à¸™à¸±à¸” (à¸§à¸±à¸™)</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="number" id="days" min="1" value="7" required>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div style="margin-top:12px">
Â  Â  Â  Â  Â  Â  Â  Â  <label>à¸Šà¸™à¸´à¸”à¹€à¸¡à¹‡à¸”à¸¢à¸²à¸—à¸µà¹ˆà¹ƒà¸Šà¹‰</label>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="radio-row">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="pill"><input type="radio" name="pills" value="3" checked> à¹ƒà¸Šà¹‰à¹€à¸¡à¹‡à¸” 3 mg à¹€à¸—à¹ˆà¸²à¸™à¸±à¹‰à¸™</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="pill"><input type="radio" name="pills" value="2"> à¹ƒà¸Šà¹‰à¹€à¸¡à¹‡à¸” 2 mg à¹€à¸—à¹ˆà¸²à¸™à¸±à¹‰à¸™</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="pill"><input type="radio" name="pills" value="both"> à¹ƒà¸Šà¹‰à¸—à¸±à¹‰à¸‡ 2 à¹à¸¥à¸° 3 mg</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="pill"><input type="radio" name="pills" value="3mg_fixed_1dayoff"> 3 mgà¹„à¸¡à¹ˆà¸¡à¸µà¹à¸šà¹ˆà¸‡à¸„à¸£à¸¶à¹ˆà¸‡ à¹à¸•à¹ˆà¸­à¸²à¸ˆà¸¡à¸µà¸§à¸±à¸™à¸«à¸¢à¸¸à¸”à¹„à¸”à¹‰</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="pill"><input type="radio" name="pills" value="2mg_fixed_1dayoff"> 2 mgà¹„à¸¡à¹ˆà¸¡à¸µà¹à¸šà¹ˆà¸‡à¸„à¸£à¸¶à¹ˆà¸‡ à¹à¸•à¹ˆà¸­à¸²à¸ˆà¸¡à¸µà¸§à¸±à¸™à¸«à¸¢à¸¸à¸”à¹„à¸”à¹‰</label>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div style="margin-top:12px" class="row">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="col">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label>à¸ à¸²à¸§à¸°à¹€à¸¥à¸·à¸­à¸”à¸­à¸­à¸</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="radio-row">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="pill"><input type="radio" name="bleed" value="no" checked> à¹„à¸¡à¹ˆà¸¡à¸µ</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="pill"><input type="radio" name="bleed" value="yes"> à¸¡à¸µ</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="col">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label>à¹‚à¸«à¸¡à¸”à¹à¸ªà¸”à¸‡à¸œà¸¥</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="radio-row">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="pill"><input type="radio" name="displayMode" value="number" checked> à¹à¸ªà¸”à¸‡à¹€à¸›à¹‡à¸™à¸•à¸±à¸§à¹€à¸¥à¸‚</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="pill"><input type="radio" name="displayMode" value="image"> à¹à¸ªà¸”à¸‡à¹€à¸›à¹‡à¸™à¸£à¸¹à¸›à¹€à¸¡à¹‡à¸”à¸¢à¸²</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </form>
Â  Â  Â  Â  <div id="results" class="result" style="display:none"></div>
Â  Â  </section>
Â  Â  <section id="tables" class="card" style="display:none">
Â  Â  Â  Â  <h3 style="color:var(--accent)">à¸•à¸²à¸£à¸²à¸‡à¹à¸œà¸™à¸à¸²à¸£à¹ƒà¸«à¹‰à¸¢à¸² (7 à¸§à¸±à¸™)</h3>
Â  Â  Â  Â  <div id="plans"></div>
Â  Â  Â  Â  <div style="margin-top:12px;text-align:right">
Â  Â  Â  Â  Â  Â  <button onclick="window.print()" class="primary">à¸”à¸²à¸§à¸™à¹Œà¹‚à¸«à¸¥à¸” / à¸à¸´à¸¡à¸à¹Œ (PDF)</button>
Â  Â  Â  Â  </div>
Â  Â  </section>
Â  Â Â 
Â  Â  <div class="standalone-calculator">
Â  Â  Â  Â  <div class="calculator-header-new">à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸„à¸´à¸”à¸„à¸³à¸™à¸§à¸“à¸«à¸²à¸›à¸£à¸´à¸¡à¸²à¸“ mg à¸£à¸§à¸¡à¹ƒà¸™ 7 à¸§à¸±à¸™ à¸‚à¸­à¸‡ warfarin (à¸£à¸­à¸‡à¸£à¸±à¸š 2, 3, 5 mg)</div>
Â  Â  Â  Â Â 
Â  Â  Â  Â  <div class="dosing-comparison-container">
Â  Â  Â  Â  Â  Â Â 
            Â  Â  Â  Â  Â  Â  <div class="pill-dosing-container">
Â  Â  Â  Â  Â  Â  Â  Â  <div id="dose2mgContainer" class="dose-input-group">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="pill-section-title">Warfarin **2** mg (à¹€à¸¡à¹‡à¸”à¸ªà¸µà¸ªà¹‰à¸¡)</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="dose-input-row" data-mg="2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label>à¹€à¸¡à¹‡à¸”:</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="number" step="0.5" min="0" value="" class="pill-count" oninput="calculateComparison(false)">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label>Ã—</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="number" step="1" min="0" max="7" value="" class="day-count" oninput="calculateComparison(false)">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label>à¸§à¸±à¸™</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="add-row-btn" onclick="addRow(2)">+ à¹€à¸à¸´à¹ˆà¸¡à¸§à¸±à¸™/à¸‚à¸™à¸²à¸”à¸¢à¸² 2 mg</button>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>

            Â  Â  Â  Â  Â  Â  <div class="pill-dosing-container">
Â  Â  Â  Â  Â  Â  Â  Â  <div id="dose3mgContainer" class="dose-input-group">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="pill-section-title">Warfarin **3** mg (à¹€à¸¡à¹‡à¸”à¸ªà¸µà¸Ÿà¹‰à¸²)</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="dose-input-row" data-mg="3">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label>à¹€à¸¡à¹‡à¸”:</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="number" step="0.5" min="0" value="" class="pill-count" oninput="calculateComparison(false)">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label>Ã—</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="number" step="1" min="0" max="7" value="" class="day-count" oninput="calculateComparison(false)">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label>à¸§à¸±à¸™</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="add-row-btn" onclick="addRow(3)">+ à¹€à¸à¸´à¹ˆà¸¡à¸§à¸±à¸™/à¸‚à¸™à¸²à¸”à¸¢à¸² 3 mg</button>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
            
            <div class="pill-dosing-container">
Â  Â  Â  Â  Â  Â  Â  Â  <div id="dose5mgContainer" class="dose-input-group">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="pill-section-title">Warfarin **5** mg (à¹€à¸¡à¹‡à¸”à¸ªà¸µà¸Šà¸¡à¸à¸¹)</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="dose-input-row" data-mg="5">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label>à¹€à¸¡à¹‡à¸”:</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="number" step="0.5" min="0" value="" class="pill-count" oninput="calculateComparison(false)">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label>Ã—</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="number" step="1" min="0" max="7" value="" class="day-count" oninput="calculateComparison(false)">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label>à¸§à¸±à¸™</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="add-row-btn" onclick="addRow(5)">+ à¹€à¸à¸´à¹ˆà¸¡à¸§à¸±à¸™/à¸‚à¸™à¸²à¸”à¸¢à¸² 5 mg</button>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
            
Â  Â  Â  Â  Â  Â  <div class="comparison-section">
Â  Â  Â  Â  Â  Â  Â  Â  <h4>à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹€à¸›à¸£à¸µà¸¢à¸šà¹€à¸—à¸µà¸¢à¸š/à¸§à¸±à¸™à¸™à¸±à¸”</h4>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="dose-input-row" style="margin-bottom: 10px;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="initialWeeklyDose" style="width: 150px; color: var(--main-pink);">à¸‚à¸™à¸²à¸”à¸¢à¸²à¹€à¸”à¸´à¸¡ (mg/à¸ªà¸±à¸›à¸”à¸²à¸«à¹Œ):</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="number" step="0.1" id="initialWeeklyDose" min="0" style="width: 70px;" oninput="calculateComparison(false)">
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="dose-input-row">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="dispenseDays" style="width: 150px; color: var(--main-pink);">à¸§à¸±à¸™à¸™à¸±à¸”à¸—à¸µà¹ˆà¸•à¹‰à¸­à¸‡à¸à¸²à¸£à¸ˆà¹ˆà¸²à¸¢ (à¸§à¸±à¸™):</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="number" id="dispenseDays" min="1" style="width: 70px;" oninput="calculateComparison(false)">
Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  <div class="action-buttons">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="clear-btn" onclick="clearData()">à¸¥à¹‰à¸²à¸‡</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="calculate-btn" onclick="calculateComparison(true)">à¸„à¸³à¸™à¸§à¸“</button>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  </div> <div id="comparisonResult" class="comparison-output" style="display: none;">
Â  Â  Â  Â  Â  Â  </div>
Â  Â  </div>
Â  Â  <footer class="card small">à¸„à¸³à¹€à¸•à¸·à¸­à¸™: à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸¡à¸·à¸­à¸™à¸µà¹‰à¹€à¸›à¹‡à¸™à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸¡à¸·à¸­à¸Šà¹ˆà¸§à¸¢à¸„à¸³à¸™à¸§à¸“à¹€à¸—à¹ˆà¸²à¸™à¸±à¹‰à¸™ à¹„à¸¡à¹ˆà¹ƒà¸Šà¹ˆà¸„à¸³à¸ªà¸±à¹ˆà¸‡à¸à¸²à¸£à¸£à¸±à¸à¸©à¸² à¹€à¹€à¸à¸—à¸¢à¹Œ/à¹€à¸ à¸ªà¸±à¸Šà¸à¸£à¹€à¸›à¹‡à¸™à¸œà¸¹à¹‰à¸•à¸±à¸”à¸ªà¸´à¸™à¹ƒà¸ˆà¸‚à¸±à¹‰à¸™à¸ªà¸¸à¸”à¸—à¹‰à¸²à¸¢</footer>
</div>
<script>
// --- START: COPY PROTECTION CODE (à¹€à¸”à¸´à¸¡) ---
document.onkeydown = function(e) {
Â  Â  if (e.keyCode == 123 ||Â 
Â  Â  Â  Â  (e.ctrlKey && e.shiftKey && e.keyCode == 'I'.charCodeAt(0)) ||
Â  Â  Â  Â  (e.ctrlKey && e.shiftKey && e.keyCode == 'J'.charCodeAt(0)) ||
Â  Â  Â  Â  (e.ctrlKey && e.keyCode == 'U'.charCodeAt(0)) ) {
Â  Â  Â  Â  return false;
Â  Â  }
};
// --- END: COPY PROTECTION CODE (à¹€à¸”à¸´à¸¡) ---

// ******************************************************
// ** GLOBAL FUNCTIONS (à¸ªà¸³à¸«à¸£à¸±à¸šà¹€à¸£à¸µà¸¢à¸à¸ˆà¸²à¸ HTML: onclick/oninput) **
// ******************************************************

/**
Â * à¸›à¸±à¸”à¹€à¸¨à¸©à¹€à¸›à¹‡à¸™à¸—à¸¨à¸™à¸´à¸¢à¸¡ 2 à¸•à¸³à¹à¸«à¸™à¹ˆà¸‡
Â * @param {number} num
Â */
function roundTwoDecimals(num) {Â 
Â  Â  return Math.round(num * 100) / 100;
}

/**
Â * à¹€à¸à¸´à¹ˆà¸¡à¹à¸–à¸§à¸ªà¸³à¸«à¸£à¸±à¸šà¸à¸²à¸£à¸à¸£à¸­à¸à¸ˆà¸³à¸™à¸§à¸™à¹€à¸¡à¹‡à¸”à¹à¸¥à¸°à¸§à¸±à¸™ (Global)
Â * @param {number} mg - 2, 3 à¸«à¸£à¸·à¸­ 5
Â */
function addRow(mg) {
Â  Â  const containerId = `dose${mg}mgContainer`;
Â  Â  const container = document.getElementById(containerId);
Â  Â Â 
Â  Â  if (!container) return;Â 

Â  Â  const newRow = document.createElement('div');
Â  Â  newRow.className = 'dose-input-row';
Â  Â  newRow.setAttribute('data-mg', mg);
Â  Â  newRow.innerHTML = `
Â  Â  Â  Â  <label>à¹€à¸¡à¹‡à¸”:</label>
Â  Â  Â  Â  <input type="number" step="0.5" min="0" value="" class="pill-count" oninput="calculateComparison(false)">
Â  Â  Â  Â  <label>Ã—</label>
Â  Â  Â  Â  <input type="number" step="1" min="0" max="7" value="" class="day-count" oninput="calculateComparison(false)">
Â  Â  Â  Â  <label>à¸§à¸±à¸™</label>
Â  Â  Â  Â  <button onclick="removeRow(this)" style="background: none; border: none; color: #E91E63; cursor: pointer; font-weight: bold; font-size: 13px; padding: 0 5px;">[à¸¥à¸š]</button>
Â  Â  `;

Â  Â  // à¹€à¸à¸´à¹ˆà¸¡à¹à¸–à¸§à¹ƒà¸«à¸¡à¹ˆà¸à¹ˆà¸­à¸™à¸›à¸¸à¹ˆà¸¡à¹€à¸à¸´à¹ˆà¸¡à¹à¸–à¸§ (lastElementChild)
Â  Â  container.insertBefore(newRow, container.lastElementChild);
Â  Â  calculateComparison(false);
}

/**
Â * à¸¥à¸šà¹à¸–à¸§à¸—à¸µà¹ˆà¸–à¸¹à¸à¹€à¸à¸´à¹ˆà¸¡à¸¡à¸² (Global)
Â * @param {HTMLElement} btn - à¸›à¸¸à¹ˆà¸¡ [à¸¥à¸š] à¸—à¸µà¹ˆà¸–à¸¹à¸à¸à¸”
Â */
function removeRow(btn) {
Â  Â  const row = btn.parentNode;
Â  Â  row.remove();
Â  Â  calculateComparison(false);
}

/**
Â * à¸„à¸³à¸™à¸§à¸“à¸‚à¸™à¸²à¸”à¸¢à¸²à¸£à¸§à¸¡à¸•à¹ˆà¸­à¸ªà¸±à¸›à¸”à¸²à¸«à¹Œà¹à¸¥à¸°à¸ˆà¸³à¸™à¸§à¸™à¹€à¸¡à¹‡à¸”à¸£à¸§à¸¡ (Global)
Â * @param {boolean} isManualClick - true à¸–à¹‰à¸²à¸¡à¸²à¸ˆà¸²à¸à¸à¸²à¸£à¸à¸”à¸›à¸¸à¹ˆà¸¡ 'à¸„à¸³à¸™à¸§à¸“'
Â */
function calculateComparison(isManualClick) {
Â  Â  const initialDoseInput = document.getElementById('initialWeeklyDose');
Â  Â  const daysInput = document.getElementById('dispenseDays');
Â  Â  const resultDiv = document.getElementById('comparisonResult');

Â  Â  if (!initialDoseInput || !daysInput || !resultDiv) return;

Â  Â  // à¹ƒà¸Šà¹‰à¸„à¹ˆà¸² 0 à¹à¸¥à¸° 7 à¹€à¸›à¹‡à¸™à¸„à¹ˆà¸²à¹€à¸£à¸´à¹ˆà¸¡à¸•à¹‰à¸™à¸«à¸²à¸à¸Šà¹ˆà¸­à¸‡à¸§à¹ˆà¸²à¸‡
Â  Â  const initialWeeklyDose = parseFloat(initialDoseInput.value) || 0;
Â  Â  const dispenseDays = parseInt(daysInput.value) || 7;Â 
Â  Â Â 
Â  Â  let totalWeeklyMg = 0;
Â  Â  let total3mgPillsFor7Days = 0;
Â  Â  let total2mgPillsFor7Days = 0;
    let total5mgPillsFor7Days = 0; // à¹€à¸à¸´à¹ˆà¸¡à¸ªà¸³à¸«à¸£à¸±à¸š 5 mg

Â  Â  const allDoseRows = document.querySelectorAll('.standalone-calculator .dose-input-row');
Â  Â Â 
Â  Â  allDoseRows.forEach(row => {
Â  Â  Â  Â  const mg = parseInt(row.getAttribute('data-mg'));
Â  Â  Â  Â  const pillCountInput = row.querySelector('.pill-count');
Â  Â  Â  Â  const dayCountInput = row.querySelector('.day-count');
Â  Â  Â  Â Â 
Â  Â  Â  Â  if (!pillCountInput || !dayCountInput) return;
Â  Â  Â  Â Â 
Â  Â  Â  Â  // *** à¸à¸²à¸£à¹à¸à¹‰à¹„à¸‚: à¹ƒà¸Šà¹‰ parseFloat() || 0 à¹€à¸à¸·à¹ˆà¸­à¸ˆà¸±à¸”à¸à¸²à¸£à¸„à¹ˆà¸²à¸§à¹ˆà¸²à¸‡/null/NaN à¸ˆà¸²à¸à¸Šà¹ˆà¸­à¸‡ input à¸§à¹ˆà¸²à¸‡ ***
Â  Â  Â  Â  const pillCount = parseFloat(pillCountInput.value) || 0;
Â  Â  Â  Â  const dayCount = parseInt(dayCountInput.value) || 0;
Â  Â  Â  Â Â 
Â  Â  Â  Â  // à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸„à¸§à¸²à¸¡à¸–à¸¹à¸à¸•à¹‰à¸­à¸‡à¸‚à¸­à¸‡à¸§à¸±à¸™
Â  Â  Â  Â  if (dayCount < 0 || dayCount > 7) {
Â  Â  Â  Â  Â  Â  if (isManualClick) {
Â  Â  Â  Â  Â  Â  Â  Â  Â alert(`à¸ˆà¸³à¸™à¸§à¸™à¸§à¸±à¸™à¸ªà¸³à¸«à¸£à¸±à¸š Warfarin ${mg} mg à¸•à¹‰à¸­à¸‡à¸­à¸¢à¸¹à¹ˆà¸£à¸°à¸«à¸§à¹ˆà¸²à¸‡ 0 à¸–à¸¶à¸‡ 7`);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  return;Â 
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  const weeklyMgFromRow = pillCount * mg * dayCount;
Â  Â  Â  Â  totalWeeklyMg += weeklyMgFromRow;
Â  Â  Â  Â Â 
Â  Â  Â  Â  if (mg === 3) {
Â  Â  Â  Â  Â  Â  total3mgPillsFor7Days += pillCount * dayCount;
Â  Â  Â  Â  } else if (mg === 2) {
Â  Â  Â  Â  Â  Â  total2mgPillsFor7Days += pillCount * dayCount;
Â  Â  Â  Â  } else if (mg === 5) { // à¹€à¸à¸´à¹ˆà¸¡à¹€à¸‡à¸·à¹ˆà¸­à¸™à¹„à¸‚à¸ªà¸³à¸«à¸£à¸±à¸š 5 mg
Â  Â  Â  Â  Â  Â  total5mgPillsFor7Days += pillCount * dayCount;
Â  Â  Â  Â  }
Â  Â  });
Â  Â Â 
Â  Â  // à¸‹à¹ˆà¸­à¸™à¸œà¸¥à¸¥à¸±à¸à¸˜à¹Œà¸«à¸²à¸à¹„à¸¡à¹ˆà¸¡à¸µà¸à¸²à¸£à¹ƒà¸ªà¹ˆà¸„à¹ˆà¸²à¹ƒà¸”à¹† à¹ƒà¸™à¸Šà¹ˆà¸­à¸‡ Warfarin
Â  Â  if (totalWeeklyMg === 0 && !isManualClick) {
Â  Â  Â  Â  Â // à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸§à¹ˆà¸²à¸Šà¹ˆà¸­à¸‡à¸›à¹‰à¸­à¸™à¸„à¹ˆà¸²à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”à¸§à¹ˆà¸²à¸‡à¹€à¸›à¸¥à¹ˆà¸²à¸«à¸£à¸·à¸­à¹„à¸¡à¹ˆ
Â  Â  Â  Â  const allEmpty = Array.from(allDoseRows).every(row => {
Â  Â  Â  Â  Â  Â  const pillCountInput = row.querySelector('.pill-count');
Â  Â  Â  Â  Â  Â  const dayCountInput = row.querySelector('.day-count');
Â  Â  Â  Â  Â  Â  return (!pillCountInput.value || pillCountInput.value.trim() === '0') &&Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â (!dayCountInput.value || dayCountInput.value.trim() === '0');
Â  Â  Â  Â  });
Â  Â  Â  Â Â 
Â  Â  Â  Â  if(allEmpty) {
Â  Â  Â  Â  Â  Â  resultDiv.style.display = 'none';
Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  }
Â  Â  }
Â  Â Â 
Â  Â  totalWeeklyMg = roundTwoDecimals(totalWeeklyMg);
Â  Â  const dailyMg = roundTwoDecimals(totalWeeklyMg / 7);
Â  Â Â 
Â  Â  const diffMg = roundTwoDecimals(totalWeeklyMg - initialWeeklyDose);
Â  Â  // à¸„à¸³à¸™à¸§à¸“ % à¸„à¸§à¸²à¸¡à¹à¸•à¸à¸•à¹ˆà¸²à¸‡
Â  Â  const diffPct = initialWeeklyDose === 0 ?Â 
Â  Â  Â  Â  (totalWeeklyMg === 0 ? 0 : 100) : // à¸–à¹‰à¸² dose à¹€à¸”à¸´à¸¡à¹€à¸›à¹‡à¸™ 0 à¹à¸¥à¸° dose à¹ƒà¸«à¸¡à¹ˆ > 0 à¸„à¸·à¸­ +100% (à¹à¸•à¹ˆà¹€à¸£à¸²à¹ƒà¸Šà¹‰ 0 à¹ƒà¸™à¸à¸£à¸“à¸µà¸™à¸µà¹‰)
Â  Â  Â  Â  roundTwoDecimals((diffMg / initialWeeklyDose) * 100);
Â  Â Â 
Â  Â  if(dispenseDays <= 0 && isManualClick) {
Â  Â  Â  Â  alert('à¸ˆà¸³à¸™à¸§à¸™à¸§à¸±à¸™à¸™à¸±à¸”à¸—à¸µà¹ˆà¸•à¹‰à¸­à¸‡à¸à¸²à¸£à¸ˆà¹ˆà¸²à¸¢à¸•à¹‰à¸­à¸‡à¹€à¸›à¹‡à¸™à¸ˆà¸³à¸™à¸§à¸™à¹€à¸•à¹‡à¸¡à¸šà¸§à¸');
Â  Â  }

Â  Â  // à¸„à¸³à¸™à¸§à¸“à¸ˆà¸³à¸™à¸§à¸™à¹€à¸¡à¹‡à¸”à¸—à¸µà¹ˆà¸•à¹‰à¸­à¸‡à¸ˆà¹ˆà¸²à¸¢à¸ªà¸³à¸«à¸£à¸±à¸šà¸§à¸±à¸™à¸™à¸±à¸” (à¸›à¸±à¸”à¸‚à¸¶à¹‰à¸™) (à¹ƒà¸Šà¹‰ dispenseDays = 7 à¸–à¹‰à¸²à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¹„à¸¡à¹ˆà¹ƒà¸ªà¹ˆà¸„à¹ˆà¸²)
Â  Â  const final3mgPills = Math.ceil(total3mgPillsFor7Days * (dispenseDays / 7));
Â  Â  const final2mgPills = Math.ceil(total2mgPillsFor7Days * (dispenseDays / 7));
    const final5mgPills = Math.ceil(total5mgPillsFor7Days * (dispenseDays / 7)); // à¸„à¸³à¸™à¸§à¸“à¸ªà¸³à¸«à¸£à¸±à¸š 5 mg

Â  Â  let resultHTML = `
Â  Â  Â  Â  <p>à¸‚à¸™à¸²à¸”à¸¢à¸²à¹ƒà¸«à¸¡à¹ˆà¸•à¹ˆà¸­à¸ªà¸±à¸›à¸”à¸²à¸«à¹Œ (7 à¸§à¸±à¸™): <strong>${totalWeeklyMg.toFixed(2)} mg</strong> (à¹€à¸‰à¸¥à¸µà¹ˆà¸¢ ${dailyMg.toFixed(2)} mg/à¸§à¸±à¸™)</p>
Â  Â  Â  Â  <p>à¸„à¸§à¸²à¸¡à¹à¸•à¸à¸•à¹ˆà¸²à¸‡à¸ˆà¸²à¸à¸‚à¸™à¸²à¸”à¸¢à¸²à¹€à¸”à¸´à¸¡ (${initialWeeklyDose.toFixed(2)} mg): <strong style="color: ${diffMg >= 0 ? 'red' : 'green'};">${diffMg >= 0 ? '+' : ''}${diffMg.toFixed(2)} mg (${diffPct >= 0 ? '+' : ''}${diffPct.toFixed(2)}%)</strong></p>
Â  Â  Â  Â  <hr style="border-top: 1px solid #ccc; margin: 10px 0;">
Â  Â  Â  Â  <p>à¸ªà¸£à¸¸à¸›à¸ˆà¸³à¸™à¸§à¸™à¹€à¸¡à¹‡à¸”à¸¢à¸²à¸ªà¸³à¸«à¸£à¸±à¸š <strong>${dispenseDays} à¸§à¸±à¸™à¸™à¸±à¸”</strong>:</p>
Â  Â  Â  Â  <p>Warfarin 5 mg: <strong>${final5mgPills} à¹€à¸¡à¹‡à¸”</strong></p>
Â  Â  Â  Â  <p>Warfarin 3 mg: <strong>${final3mgPills} à¹€à¸¡à¹‡à¸”</strong></p>
Â  Â  Â  Â  <p>Warfarin 2 mg: <strong>${final2mgPills} à¹€à¸¡à¹‡à¸”</strong></p>
Â  Â  `;
Â  Â Â 
Â  Â  resultDiv.innerHTML = resultHTML;
Â  Â  resultDiv.style.display = 'block';
}

/**
Â * à¸¥à¹‰à¸²à¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”à¹ƒà¸™à¸Ÿà¸­à¸£à¹Œà¸¡à¸ªà¹ˆà¸§à¸™à¸„à¸³à¸™à¸§à¸“à¸„à¸¹à¸“à¸§à¸±à¸™ (Global)
Â */
function clearData() {
Â  Â  const initialDoseInput = document.getElementById('initialWeeklyDose');
Â  Â  const daysInput = document.getElementById('dispenseDays');
Â  Â  const resultDiv = document.getElementById('comparisonResult');

Â  Â  if (!initialDoseInput || !daysInput || !resultDiv) return;

Â  Â  document.querySelectorAll('.standalone-calculator .dose-input-group').forEach(container => {
Â  Â  Â  Â  // à¸¥à¸šà¹à¸–à¸§à¸—à¸µà¹ˆà¸–à¸¹à¸à¹€à¸à¸´à¹ˆà¸¡ (à¹€à¸£à¸´à¹ˆà¸¡à¸ˆà¸²à¸à¹à¸–à¸§à¸—à¸µà¹ˆ 2 à¸«à¸£à¸·à¸­ index 1)
Â  Â  Â  Â  const rows = container.querySelectorAll('.dose-input-row');
Â  Â  Â  Â  for (let i = 1; i < rows.length; i++) {
Â  Â  Â  Â  Â  Â  rows[i].remove();
Â  Â  Â  Â  }
Â  Â  Â  Â  // à¹€à¸„à¸¥à¸µà¸¢à¸£à¹Œà¹à¸–à¸§à¹€à¸£à¸´à¹ˆà¸¡à¸•à¹‰à¸™
Â  Â  Â  Â  if (rows.length > 0) {
            const pillCountInput = rows[0].querySelector('.pill-count');
            const dayCountInput = rows[0].querySelector('.day-count');
            if (pillCountInput) pillCountInput.value = ''; // à¹€à¸„à¸¥à¸µà¸¢à¸£à¹Œà¹€à¸›à¹‡à¸™à¸„à¹ˆà¸²à¸§à¹ˆà¸²à¸‡
            if (dayCountInput) dayCountInput.value = '';Â  // à¹€à¸„à¸¥à¸µà¸¢à¸£à¹Œà¹€à¸›à¹‡à¸™à¸„à¹ˆà¸²à¸§à¹ˆà¸²à¸‡
        }
Â  Â  });

Â  Â  initialDoseInput.value = '';
Â  Â  daysInput.value = '';
Â  Â  resultDiv.style.display = 'none';
Â  Â  resultDiv.innerHTML = '';
}


// ******************************************************
// ** DOM CONTENT LOADED (à¸ªà¸³à¸«à¸£à¸±à¸š Event Listeners à¹à¸¥à¸° Funtions à¸ à¸²à¸¢à¹ƒà¸™) **
// ******************************************************

document.addEventListener('DOMContentLoaded', function() {
Â  Â Â 
Â  Â  // --- FUNTIONS à¹€à¸”à¸´à¸¡à¸—à¸µà¹ˆà¸–à¸¹à¸à¹€à¸£à¸µà¸¢à¸à¹ƒà¸Šà¹‰à¹‚à¸”à¸¢ Event Listeners (Local) ---
Â  Â  function roundHalf(x){return Math.round(x*2)/2}
Â  Â  function distributeEvenly7(total){
Â  Â  Â  Â  const base = Math.floor(total/7);
Â  Â  Â  Â  let arr = Array(7).fill(base);
Â  Â  Â  Â  let rem = total - base*7;
Â  Â  Â  Â  for(let i=0;i<rem;i++) arr[i]++;
Â  Â  Â  Â  return arr;
Â  Â  }
Â  Â Â 
Â  Â  /**
Â  Â  Â * **à¸Ÿà¸±à¸‡à¸à¹Œà¸Šà¸±à¸™à¹ƒà¸«à¸¡à¹ˆ:** à¸à¸£à¸°à¸ˆà¸²à¸¢à¸¢à¸² 7 à¸§à¸±à¸™ à¹à¸šà¸šà¹€à¸¡à¹‡à¸”à¹€à¸•à¹‡à¸¡ (à¸«à¹‰à¸²à¸¡à¹à¸šà¹ˆà¸‡à¸„à¸£à¸¶à¹ˆà¸‡) à¹à¸¥à¸°à¸¡à¸µà¸§à¸±à¸™à¸«à¸¢à¸¸à¸”à¹„à¸”à¹‰à¹€à¸à¸µà¸¢à¸‡ 1 à¸§à¸±à¸™ (0 mg)
Â  Â  Â * @param {number} totalPills - à¸ˆà¸³à¸™à¸§à¸™à¹€à¸¡à¹‡à¸”à¹€à¸•à¹‡à¸¡à¸£à¸§à¸¡ 7 à¸§à¸±à¸™à¸—à¸µà¹ˆà¸•à¹‰à¸­à¸‡à¸à¸²à¸£à¹ƒà¸«à¹‰
Â  Â  Â */
Â  Â  function distributeEvenly7Fixed(totalPills) {
Â  Â  Â  Â  if (totalPills === 0) return Array(7).fill(0);
Â  Â  Â  Â Â 
Â  Â  Â  Â  let daysToDose = 7;
Â  Â  Â  Â  let arr = [];

Â  Â  Â  Â  // à¹€à¸‡à¸·à¹ˆà¸­à¸™à¹„à¸‚: à¸¡à¸µà¸§à¸±à¸™à¸«à¸¢à¸¸à¸”à¹„à¸”à¹‰à¸ªà¸¹à¸‡à¸ªà¸¸à¸” 1 à¸§à¸±à¸™ (à¸–à¹‰à¸²à¹‚à¸”à¸ªà¸•à¹ˆà¸³à¸à¸§à¹ˆà¸² 7 à¹€à¸¡à¹‡à¸”)
Â  Â  Â  Â  if (totalPills < 7) {
Â  Â  Â  Â  Â  Â  daysToDose = 6; // à¸ˆà¹ˆà¸²à¸¢à¸¢à¸²à¹à¸„à¹ˆ 6 à¸§à¸±à¸™ à¸—à¸µà¹ˆà¹€à¸«à¸¥à¸·à¸­à¹€à¸›à¹‡à¸™ 0 mg
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  const basePills = Math.floor(totalPills / daysToDose);
Â  Â  Â  Â  arr = Array(daysToDose).fill(basePills);
Â  Â  Â  Â  let remainingPills = totalPills - basePills * daysToDose;
Â  Â  Â  Â Â 
Â  Â  Â  Â  for (let i = 0; i < remainingPills; i++) arr[i]++;

Â  Â  Â  Â  // à¸–à¹‰à¸²à¸ˆà¹ˆà¸²à¸¢à¹à¸„à¹ˆ 6 à¸§à¸±à¸™ à¹ƒà¸«à¹‰à¹€à¸à¸´à¹ˆà¸¡ 0 mg à¹€à¸‚à¹‰à¸²à¹„à¸› 1 à¸§à¸±à¸™
Â  Â  Â  Â  if (daysToDose === 6) {
Â  Â  Â  Â  Â  Â  arr.push(0);Â 
Â  Â  Â  Â  }

Â  Â  Â  Â  // à¸•à¹‰à¸­à¸‡à¹à¸™à¹ˆà¹ƒà¸ˆà¸§à¹ˆà¸²à¸„à¹ˆà¸²à¹ƒà¸™ arr à¹€à¸›à¹‡à¸™ Integer (à¹€à¸¡à¹‡à¸”à¹€à¸•à¹‡à¸¡)
Â  Â  Â  Â  return arr.map(p => Math.round(p));Â 
Â  Â  }
Â  Â Â 
Â  Â  function findBestCombo(target){
Â  Â  Â  Â  // à¸•à¸£à¸£à¸à¸°à¹€à¸”à¸´à¸¡ (à¹ƒà¸Šà¹‰ Warfarin 3mg à¹à¸¥à¸° 2mg)
        // à¹€à¸à¸·à¹ˆà¸­à¸£à¸­à¸‡à¸£à¸±à¸š 5mg à¸”à¹‰à¸§à¸¢ (à¹ƒà¸™à¸­à¸™à¸²à¸„à¸• à¸­à¸²à¸ˆà¸•à¹‰à¸­à¸‡à¸›à¸£à¸±à¸šà¸•à¸£à¸£à¸à¸°à¸™à¸µà¹‰à¸«à¸²à¸à¸•à¹‰à¸­à¸‡à¸à¸²à¸£à¹ƒà¸«à¹‰à¸„à¸³à¸™à¸§à¸“ 5mg à¹ƒà¸™à¸ªà¹ˆà¸§à¸™ INR)
Â  Â  Â  Â  const numSets = Math.round(target / 5);
Â  Â  Â  Â  const h3 = numSets;
Â  Â  Â  Â  const h2 = numSets;
Â  Â  Â  Â  const total = h3*3 + h2*2;
Â  Â  Â  Â  return {h3:h3, h2:h2, total:total, type:'5mg'};
Â  Â  }
Â  Â  function generatePillImage(count, pillMg){
Â  Â  Â  Â  let html = '';
Â  Â  Â  Â  const fullPills = Math.floor(count);
Â  Â  Â  Â  const hasHalf = count % 1 !== 0;
Â  Â  Â  Â  let pillClass = '';
        if (pillMg === 3) pillClass = 'pill-icon-3mg';
        else if (pillMg === 2) pillClass = 'pill-icon-2mg';
        else if (pillMg === 5) pillClass = 'pill-icon-5mg'; // à¹€à¸à¸´à¹ˆà¸¡ 5 mg
Â  Â  Â  Â  const pillText = `${pillMg} mg`;
Â  Â  Â  Â  for(let i=0; i<fullPills; i++){
Â  Â  Â  Â  Â  Â  html += `<div class="pill-icon-wrapper">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="pill-icon ${pillClass}"></span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="tooltip-text">${pillText} (à¹€à¸•à¹‡à¸¡à¹€à¸¡à¹‡à¸”)</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>`;
Â  Â  Â  Â  }
Â  Â  Â  Â  if(hasHalf){
Â  Â  Â  Â  Â  Â  html += `<div class="pill-icon-wrapper">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="pill-icon half-pill ${pillClass}"></span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="tooltip-text">${pillText} (à¸„à¸£à¸¶à¹ˆà¸‡à¹€à¸¡à¹‡à¸”)</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>`;
Â  Â  Â  Â  }
Â  Â  Â  Â  return html;Â 
Â  Â  }
Â  Â  function buildPlanHTML(title, combo, weeklyDose, displayMode, total3PillCount, total2PillCount, planIndex){
        // **à¸«à¸¡à¸²à¸¢à¹€à¸«à¸•à¸¸:** à¸ªà¹ˆà¸§à¸™à¸™à¸µà¹‰à¹ƒà¸Šà¹‰à¸•à¸£à¸£à¸à¸°à¹€à¸”à¸´à¸¡à¸—à¸µà¹ˆà¸„à¸³à¸™à¸§à¸“à¸ˆà¸²à¸ Warfarin 2mg/3mg à¹€à¸—à¹ˆà¸²à¸™à¸±à¹‰à¸™
        // à¸«à¸²à¸à¸•à¹‰à¸­à¸‡à¸à¸²à¸£à¹ƒà¸«à¹‰à¸•à¸£à¸£à¸à¸° INR à¸£à¸­à¸‡à¸£à¸±à¸š 5mg à¸”à¹‰à¸§à¸¢ à¸•à¹‰à¸­à¸‡à¸›à¸£à¸±à¸šà¸›à¸£à¸¸à¸‡à¸ªà¹ˆà¸§à¸™ findBestCombo à¹à¸¥à¸°à¸à¸²à¸£à¸à¸£à¸°à¸ˆà¸²à¸¢à¸¢à¸² 
        // à¹à¸•à¹ˆà¹ƒà¸™à¹‚à¸„à¹‰à¸”à¸™à¸µà¹‰ à¸¢à¸±à¸‡à¸„à¸‡à¹ƒà¸Šà¹‰ 3mg à¹à¸¥à¸° 2mg à¹ƒà¸™à¸ªà¹ˆà¸§à¸™à¸•à¸²à¸£à¸²à¸‡à¹à¸œà¸™à¸à¸²à¸£à¹ƒà¸«à¹‰à¸¢à¸² (Plan Table)
Â  Â  Â  Â  const pillChoice = document.querySelector('input[name="pills"]:checked').value;Â 
Â  Â  Â  Â  const isFixedDose = pillChoice === '3mg_fixed_1dayoff' || pillChoice === '2mg_fixed_1dayoff';

Â  Â  Â  Â  let perDay3 = [];
Â  Â  Â  Â  let perDay2 = [];

Â  Â  Â  Â  // à¹ƒà¸Šà¹‰à¸Ÿà¸±à¸‡à¸à¹Œà¸Šà¸±à¸™à¸à¸£à¸°à¸ˆà¸²à¸¢à¸¢à¸²à¸•à¸²à¸¡à¸›à¸£à¸°à¹€à¸ à¸—à¹€à¸¡à¹‡à¸”
Â  Â  Â  Â  if (isFixedDose) {
Â  Â  Â  Â  Â  Â  if (pillChoice === '3mg_fixed_1dayoff') {
Â  Â  Â  Â  Â  Â  Â  Â  perDay3 = distributeEvenly7Fixed(combo.h3); // à¸ˆà¸³à¸™à¸§à¸™à¹€à¸¡à¹‡à¸” 3mg (à¹€à¸¡à¹‡à¸”à¹€à¸•à¹‡à¸¡)
Â  Â  Â  Â  Â  Â  Â  Â  perDay2 = Array(7).fill(0);
Â  Â  Â  Â  Â  Â  } else if (pillChoice === '2mg_fixed_1dayoff') {
Â  Â  Â  Â  Â  Â  Â  Â  perDay2 = distributeEvenly7Fixed(combo.h2); // à¸ˆà¸³à¸™à¸§à¸™à¹€à¸¡à¹‡à¸” 2mg (à¹€à¸¡à¹‡à¸”à¹€à¸•à¹‡à¸¡)
Â  Â  Â  Â  Â  Â  Â  Â  perDay3 = Array(7).fill(0);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  // à¸•à¸£à¸£à¸à¸°à¹€à¸”à¸´à¸¡ (à¸£à¸­à¸‡à¸£à¸±à¸šà¸„à¸£à¸¶à¹ˆà¸‡à¹€à¸¡à¹‡à¸”)
Â  Â  Â  Â  Â  Â  perDay3 = distributeEvenly7(combo.h3);
Â  Â  Â  Â  Â  Â  perDay2 = distributeEvenly7(combo.h2);
Â  Â  Â  Â  }

Â  Â  Â  Â  const totalWeekly = combo.total;
Â  Â  Â  Â  const diffWeekPct = weeklyDose===0?0:((totalWeekly-weeklyDose)/weeklyDose)*100;
Â  Â  Â  Â  const pctText = `${diffWeekPct>0?'+':''}${diffWeekPct.toFixed(2)}%`;
Â  Â  Â  Â  const dayNames = ['à¸ˆà¸±à¸™à¸—à¸£à¹Œ','à¸­à¸±à¸‡à¸„à¸²à¸£','à¸à¸¸à¸˜','à¸à¸¤à¸«à¸±à¸ª','à¸¨à¸¸à¸à¸£à¹Œ','à¹€à¸ªà¸²à¸£à¹Œ','à¸­à¸²à¸—à¸´à¸•à¸¢à¹Œ'];
Â  Â  Â  Â  const dayClasses = ['mon','tue','wed','thu','fri','sat','sun'];Â 
Â  Â  Â  Â Â 
Â  Â  Â  Â  let html = `<div class="plan-section plan-${planIndex}">`;
Â  Â  Â  Â  html += `<h4>à¸•à¸±à¸§à¹€à¸¥à¸·à¸­à¸: ${title} â€” à¸£à¸§à¸¡ ${totalWeekly.toFixed(2)} mg/à¸ªà¸±à¸›à¸”à¸²à¸«à¹Œ (${pctText} à¸ˆà¸²à¸à¹€à¸”à¸´à¸¡)</h4>`;
Â  Â  Â  Â  if (displayMode === 'image') {
Â  Â  Â  Â  Â  Â  html += `<div class="plan-grid">`;
Â  Â  Â  Â  Â  Â  for(let i=0;i<7;i++){
Â  Â  Â  Â  Â  Â  Â  Â  let t3 = perDay3[i]; // à¹€à¸¡à¹‡à¸” 3mg
Â  Â  Â  Â  Â  Â  Â  Â  let t2 = perDay2[i]; // à¹€à¸¡à¹‡à¸” 2mg

Â  Â  Â  Â  Â  Â  Â  Â  if (!isFixedDose) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (combo.type === '3mg') {Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  t3 = t3 / 2; // t3 à¹€à¸”à¸´à¸¡à¹€à¸›à¹‡à¸™à¸ˆà¸³à¸™à¸§à¸™à¸„à¸£à¸¶à¹ˆà¸‡à¹€à¸¡à¹‡à¸”
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  t2 = 0;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else if (combo.type === '2mg') {Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  t2 = t2 / 2; // t2 à¹€à¸”à¸´à¸¡à¹€à¸›à¹‡à¸™à¸ˆà¸³à¸™à¸§à¸™à¸„à¸£à¸¶à¹ˆà¸‡à¹€à¸¡à¹‡à¸”
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  t3 = 0;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  const mg = t3*3 + t2*2;
Â  Â  Â  Â  Â  Â  Â  Â  const t3Html = generatePillImage(t3, 3);
Â  Â  Â  Â  Â  Â  Â  Â  const t2Html = generatePillImage(t2, 2);
                // à¹„à¸¡à¹ˆà¸¡à¸µà¸à¸²à¸£à¹à¸ªà¸”à¸‡ 5mg à¹ƒà¸™à¸•à¸²à¸£à¸²à¸‡à¸™à¸µà¹‰
Â  Â  Â  Â  Â  Â  Â  Â  const totalPillUnits = Math.ceil(t3) + Math.ceil(t2);
Â  Â  Â  Â  Â  Â  Â  Â  const shrinkClass = totalPillUnits >= 5 ? 'shrink-pills' : '';
Â  Â  Â  Â  Â  Â  Â  Â  let doseText = '';
Â  Â  Â  Â  Â  Â  Â  Â  if (t3 > 0) doseText += `3 mg x ${t3 % 1 === 0 ? t3 : t3.toFixed(1)}\n`;
Â  Â  Â  Â  Â  Â  Â  Â  if (t2 > 0) doseText += `2 mg x ${t2 % 1 === 0 ? t2 : t2.toFixed(1)}`;
Â  Â  Â  Â  Â  Â  Â  Â  html += `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="day-card">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="day-name ${dayClasses[i]}">${dayNames[i]}</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="daily-mg">(${mg.toFixed(1)} mg)</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="pill-container ${shrinkClass}">${t2Html}${t3Html}</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="daily-dose-text" style="white-space:pre-line">${doseText.trim()}</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  html += `</div>`;
Â  Â  Â  Â  Â  Â  html += `<h4>à¸£à¸§à¸¡à¸¢à¸²à¸ªà¸³à¸«à¸£à¸±à¸š ${document.getElementById('days').value} à¸§à¸±à¸™à¸™à¸±à¸”:</h4>`;
Â  Â  Â  Â  Â  Â  html += `<div class="summary">`;
Â  Â  Â  Â  Â  Â  if(total3PillCount > 0) {
Â  Â  Â  Â  Â  Â  Â  Â  html += `<div class="summary-line"><span class="summary-pill pill-icon-3mg"></span> 3 mg: ${total3PillCount} à¹€à¸¡à¹‡à¸”</div>`;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  if(total2PillCount > 0) {
Â  Â  Â  Â  Â  Â  Â  Â  html += `<div class="summary-line"><span class="summary-pill pill-icon-2mg"></span> 2 mg: ${total2PillCount} à¹€à¸¡à¹‡à¸”</div>`;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  html += `</div>`;
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  const pillTypes = [];
Â  Â  Â  Â  Â  Â  // à¹€à¸à¸´à¹ˆà¸¡à¹€à¸‡à¸·à¹ˆà¸­à¸™à¹„à¸‚à¸ªà¸³à¸«à¸£à¸±à¸šà¸•à¸±à¸§à¹€à¸¥à¸·à¸­à¸à¹ƒà¸«à¸¡à¹ˆ
Â  Â  Â  Â  Â  Â  if (pillChoice === '3' || pillChoice === 'both' || pillChoice === '3mg_fixed_1dayoff') pillTypes.push({ label: '3 mg (à¹€à¸¡à¹‡à¸”)', type: 3 });
Â  Â  Â  Â  Â  Â  if (pillChoice === '2' || pillChoice === 'both' || pillChoice === '2mg_fixed_1dayoff') pillTypes.push({ label: '2 mg (à¹€à¸¡à¹‡à¸”)', type: 2 });
Â  Â  Â  Â  Â  Â  pillTypes.push({ label: 'à¸£à¸§à¸¡ (mg)', type: 'total' });
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  let headerCols = `<th>à¸Šà¸™à¸´à¸”à¸¢à¸²</th>`;
Â  Â  Â  Â  Â  Â  dayNames.forEach(day => { headerCols += `<th>${day}</th>`; });
Â  Â  Â  Â  Â  Â  html += `<table class="plan-table plan-${planIndex}"><thead><tr>${headerCols}</tr></thead><tbody>`;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  pillTypes.forEach(pillType => {
Â  Â  Â  Â  Â  Â  Â  Â  let dataRow = `<tr><td style="font-weight: 600;">${pillType.label}</td>`;
Â  Â  Â  Â  Â  Â  Â  Â  for(let i=0;i<7;i++){
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  let t3 = perDay3[i];
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  let t2 = perDay2[i];
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (!isFixedDose) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (combo.type === '3mg') {Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  t3 = t3 / 2;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  t2 = 0;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else if (combo.type === '2mg') {Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  t2 = t2 / 2;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  t3 = 0;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  let displayValue = 0;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if(pillType.type === 3) displayValue = t3;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  else if(pillType.type === 2) displayValue = t2;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  else if(pillType.type === 'total') displayValue = t3*3 + t2*2;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  dataRow += `<td>${displayValue === 0 ? '-' : displayValue.toFixed(pillType.type === 'total' ? 1 : (displayValue % 1 === 0 ? 0 : 1))}</td>`;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  dataRow += `</tr>`;
Â  Â  Â  Â  Â  Â  Â  Â  html += dataRow;
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  html += `</tbody></table>`;
Â  Â  Â  Â  }
Â  Â  Â  Â  html += `</div>`;
Â  Â  Â  Â  return html;
Â  Â  }

Â  Â  function showResults() {
Â  Â  Â  Â  const inr = parseFloat(document.getElementById('inr').value);
Â  Â  Â  Â  const weeklyDose = parseFloat(document.getElementById('weeklyDose').value);
Â  Â  Â  Â  const days = parseInt(document.getElementById('days').value);
Â  Â  Â  Â  const pillChoice = document.querySelector('input[name="pills"]:checked').value;
Â  Â  Â  Â  const bleed = document.querySelector('input[name="bleed"]:checked').value;
Â  Â  Â  Â  const displayMode = document.querySelector('input[name="displayMode"]:checked').value;
Â  Â  Â  Â  const resultsDiv = document.getElementById('results');
Â  Â  Â  Â  const plansDiv = document.getElementById('plans');
Â  Â  Â  Â  const tablesSection = document.getElementById('tables');

Â  Â  Â  Â  if (isNaN(inr) || isNaN(weeklyDose) || isNaN(days) || days <= 0) {
Â  Â  Â  Â  Â  Â  resultsDiv.style.display = 'none';
Â  Â  Â  Â  Â  Â  tablesSection.style.display = 'none';
Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  }

Â  Â  Â  Â  let targetWeeklyDose = 0;
Â  Â  Â  Â  let note = '';

Â  Â  Â  Â  if (inr < 1.5) {
Â  Â  Â  Â  Â  Â  targetWeeklyDose = weeklyDose * 1.05; // à¹€à¸à¸´à¹ˆà¸¡ 5%
Â  Â  Â  Â  Â  Â  note = "INR à¸•à¹ˆà¸³à¹€à¸à¸´à¸™à¹„à¸›: à¸­à¸²à¸ˆà¹€à¸à¸´à¹ˆà¸¡à¸‚à¸™à¸²à¸”à¸¢à¸²à¹€à¸¥à¹‡à¸à¸™à¹‰à¸­à¸¢ (+5%) à¹à¸¥à¸°à¸­à¸²à¸ˆà¸¡à¸µà¸§à¸±à¸™à¸à¸±à¸à¸¢à¸² (Hold Dose) 1 à¸§à¸±à¸™à¸«à¸²à¸à¸¡à¸µà¸ à¸²à¸§à¸°à¹€à¸¥à¸·à¸­à¸”à¸­à¸­à¸ à¸«à¸£à¸·à¸­à¸«à¸²à¸à¹à¸à¸—à¸¢à¹Œà¸ªà¸±à¹ˆà¸‡";
Â  Â  Â  Â  } else if (inr >= 1.5 && inr < 2.0) {
Â  Â  Â  Â  Â  Â  targetWeeklyDose = weeklyDose * 1.10; // à¹€à¸à¸´à¹ˆà¸¡ 10%
Â  Â  Â  Â  Â  Â  note = "INR à¸•à¹ˆà¸³à¸à¸§à¹ˆà¸²à¸Šà¹ˆà¸§à¸‡à¹€à¸›à¹‰à¸²à¸«à¸¡à¸²à¸¢: à¹€à¸à¸´à¹ˆà¸¡à¸‚à¸™à¸²à¸”à¸¢à¸² (+10%)";
Â  Â  Â  Â  } else if (inr >= 2.0 && inr <= 3.0) {
Â  Â  Â  Â  Â  Â  targetWeeklyDose = weeklyDose * 1.00; // à¸„à¸‡à¸—à¸µà¹ˆ
Â  Â  Â  Â  Â  Â  note = "INR à¸­à¸¢à¸¹à¹ˆà¹ƒà¸™à¸Šà¹ˆà¸§à¸‡à¹€à¸›à¹‰à¸²à¸«à¸¡à¸²à¸¢ (2.0-3.0): à¸„à¸‡à¸‚à¸™à¸²à¸”à¸¢à¸²à¹€à¸—à¹ˆà¸²à¹€à¸”à¸´à¸¡";
Â  Â  Â  Â  } else if (inr > 3.0 && inr <= 4.0) {
Â  Â  Â  Â  Â  Â  targetWeeklyDose = weeklyDose * 0.90; // à¸¥à¸” 10%
Â  Â  Â  Â  Â  Â  note = "INR à¸ªà¸¹à¸‡à¸à¸§à¹ˆà¸²à¸Šà¹ˆà¸§à¸‡à¹€à¸›à¹‰à¸²à¸«à¸¡à¸²à¸¢à¹€à¸¥à¹‡à¸à¸™à¹‰à¸­à¸¢: à¸¥à¸”à¸‚à¸™à¸²à¸”à¸¢à¸² (-10%)";
Â  Â  Â  Â  Â  Â  if (bleed === 'yes') {
Â  Â  Â  Â  Â  Â  Â  Â  targetWeeklyDose = weeklyDose * 0.85; // à¸¥à¸” 15%
Â  Â  Â  Â  Â  Â  Â  Â  note += "\n(à¸¡à¸µà¸ à¸²à¸§à¸°à¹€à¸¥à¸·à¸­à¸”à¸­à¸­à¸: à¸­à¸²à¸ˆà¸¥à¸”à¹€à¸à¸´à¹ˆà¸¡à¹€à¸›à¹‡à¸™ -15% à¹à¸¥à¸°à¸‡à¸” 1 Dose)";
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  } else if (inr > 4.0 && inr <= 5.0) {
Â  Â  Â  Â  Â  Â  targetWeeklyDose = weeklyDose * 0.80; // à¸¥à¸” 20%
Â  Â  Â  Â  Â  Â  note = "INR à¸ªà¸¹à¸‡à¹€à¸à¸´à¸™à¹„à¸›: à¸‡à¸” 1 à¸§à¸±à¸™ à¹à¸¥à¹‰à¸§à¸¥à¸”à¸‚à¸™à¸²à¸”à¸¢à¸² (-20%)";
Â  Â  Â  Â  Â  Â  if (bleed === 'yes') {
Â  Â  Â  Â  Â  Â  Â  Â  targetWeeklyDose = weeklyDose * 0.75; // à¸¥à¸” 25%
Â  Â  Â  Â  Â  Â  Â  Â  note += "\n(à¸¡à¸µà¸ à¸²à¸§à¸°à¹€à¸¥à¸·à¸­à¸”à¸­à¸­à¸: à¸­à¸²à¸ˆà¸¥à¸”à¹€à¸à¸´à¹ˆà¸¡à¹€à¸›à¹‡à¸™ -25% à¹à¸¥à¸°à¸‡à¸” 1-2 Dose)";
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  } else if (inr > 5.0) {
Â  Â  Â  Â  Â  Â  targetWeeklyDose = weeklyDose * 0.70; // à¸¥à¸” 30%
Â  Â  Â  Â  Â  Â  note = "INR à¸ªà¸¹à¸‡à¸­à¸±à¸™à¸•à¸£à¸²à¸¢: à¸‡à¸” 2-3 à¸§à¸±à¸™ à¹à¸¥à¹‰à¸§à¸¥à¸”à¸‚à¸™à¸²à¸”à¸¢à¸² (-30%) à¹à¸¥à¸°à¸à¸´à¸ˆà¸²à¸£à¸“à¸²à¹ƒà¸«à¹‰ Vitamin K";
Â  Â  Â  Â  Â  Â  if (bleed === 'yes') {
Â  Â  Â  Â  Â  Â  Â  Â  targetWeeklyDose = weeklyDose * 0.60; // à¸¥à¸” 40%
Â  Â  Â  Â  Â  Â  Â  Â  note += "\n(à¸¡à¸µà¸ à¸²à¸§à¸°à¹€à¸¥à¸·à¸­à¸”à¸­à¸­à¸: à¸­à¸²à¸ˆà¸¥à¸”à¹€à¸à¸´à¹ˆà¸¡à¹€à¸›à¹‡à¸™ -40% à¹à¸¥à¸°à¸‡à¸” 3+ Dose à¸à¸£à¹‰à¸­à¸¡ Vitamin K)";
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  targetWeeklyDose = roundTwoDecimals(targetWeeklyDose);
Â  Â  Â  Â  const diff = roundTwoDecimals(targetWeeklyDose - weeklyDose);
Â  Â  Â  Â  const diffPct = weeklyDose === 0 ? 0 : roundTwoDecimals((diff / weeklyDose) * 100);

Â  Â  Â  Â  let resultHTML = `
Â  Â  Â  Â  Â  Â  <h3>à¸œà¸¥à¸à¸²à¸£à¸„à¸³à¸™à¸§à¸“à¹€à¸šà¸·à¹‰à¸­à¸‡à¸•à¹‰à¸™</h3>
Â  Â  Â  Â  Â  Â  <table>
Â  Â  Â  Â  Â  Â  Â  Â  <tr>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <th>à¸‚à¸™à¸²à¸”à¸¢à¸²à¹€à¸”à¸´à¸¡/à¸ªà¸±à¸›à¸”à¸²à¸«à¹Œ</th>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <th>à¸‚à¸™à¸²à¸”à¸¢à¸²à¹ƒà¸«à¸¡à¹ˆà¸—à¸µà¹ˆà¹à¸™à¸°à¸™à¸³/à¸ªà¸±à¸›à¸”à¸²à¸«à¹Œ</th>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <th>à¸„à¸§à¸²à¸¡à¹à¸•à¸à¸•à¹ˆà¸²à¸‡</th>
Â  Â  Â  Â  Â  Â  Â  Â  </tr>
Â  Â  Â  Â  Â  Â  Â  Â  <tr>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <td>${weeklyDose.toFixed(1)} mg</td>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <td style="font-weight:bold">${targetWeeklyDose.toFixed(1)} mg</td>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <td style="color:${diff >= 0 ? 'red' : 'green'}; font-weight:bold">${diff >= 0 ? '+' : ''}${diff.toFixed(1)} mg (${diffPct >= 0 ? '+' : ''}${diffPct.toFixed(1)}%)</td>
Â  Â  Â  Â  Â  Â  Â  Â  </tr>
Â  Â  Â  Â  Â  Â  </table>
Â  Â  Â  Â  Â  Â  <div class="note"><strong>à¸‚à¹‰à¸­à¹à¸™à¸°à¸™à¸³:</strong> ${note}</div>
Â  Â  Â  Â  `;
Â  Â  Â  Â  resultsDiv.innerHTML = resultHTML;
Â  Â  Â  Â  resultsDiv.style.display = 'block';

Â  Â  Â  Â  // --- à¸à¸²à¸£à¸„à¸³à¸™à¸§à¸“à¹à¸œà¸™à¸à¸²à¸£à¸ˆà¹ˆà¸²à¸¢à¸¢à¸² 7 à¸§à¸±à¸™ ---
Â  Â  Â  Â  const targetDailyDose = targetWeeklyDose / 7;
Â  Â  Â  Â  let plansHTML = '';
Â  Â  Â  Â  let targetPillValue = 0;
Â  Â  Â  Â Â 
Â  Â  Â  Â  // à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸„à¸§à¸²à¸¡à¸–à¸¹à¸à¸•à¹‰à¸­à¸‡à¸‚à¸­à¸‡à¸‚à¸™à¸²à¸”à¸¢à¸²à¸—à¸µà¹ˆà¹ƒà¸Šà¹‰à¹ƒà¸™à¸•à¸²à¸£à¸²à¸‡
        // (à¸ªà¹ˆà¸§à¸™à¸™à¸µà¹‰à¸¢à¸±à¸‡à¸ˆà¸³à¸à¸±à¸”à¸­à¸¢à¸¹à¹ˆà¹à¸„à¹ˆ 2 mg à¹à¸¥à¸° 3 mg à¸•à¸²à¸¡à¸•à¸£à¸£à¸à¸°à¹€à¸”à¸´à¸¡à¸‚à¸­à¸‡à¸•à¸²à¸£à¸²à¸‡)
Â  Â  Â  Â  const isOnly3mg = pillChoice === '3' || pillChoice === '3mg_fixed_1dayoff';
Â  Â  Â  Â  const isOnly2mg = pillChoice === '2' || pillChoice === '2mg_fixed_1dayoff';

Â  Â  Â  Â  // 1. à¹à¸œà¸™à¸—à¸µà¹ˆà¹ƒà¸Šà¹‰à¸à¸²à¸£à¸„à¸³à¸™à¸§à¸“à¹€à¸¡à¹‡à¸”à¸ˆà¸²à¸ Dose à¹ƒà¸«à¸¡à¹ˆ (Default)
Â  Â  Â  Â  if (isOnly3mg) {
Â  Â  Â  Â  Â  Â  targetPillValue = roundHalf(targetWeeklyDose / 3); // 3 mg/à¹€à¸¡à¹‡à¸”
Â  Â  Â  Â  Â  Â  let combo = { h3: targetPillValue * 2, h2: 0, total: targetPillValue * 3, type: '3mg' };
Â  Â  Â  Â  Â  Â  if (pillChoice === '3mg_fixed_1dayoff') combo.h3 = Math.round(targetPillValue); // à¹€à¸¡à¹‡à¸”à¹€à¸•à¹‡à¸¡
Â  Â  Â  Â  Â  Â  const totalPills = Math.ceil(combo.h3 * (pillChoice === '3mg_fixed_1dayoff' ? 1 : 0.5) * (days / 7));
Â  Â  Â  Â  Â  Â  plansHTML += buildPlanHTML("à¹ƒà¸Šà¹‰à¹€à¸¡à¹‡à¸” 3 mg à¹€à¸—à¹ˆà¸²à¸™à¸±à¹‰à¸™", combo, weeklyDose, displayMode, totalPills, 0, 1);
Â  Â  Â  Â  } else if (isOnly2mg) {
Â  Â  Â  Â  Â  Â  targetPillValue = roundHalf(targetWeeklyDose / 2); // 2 mg/à¹€à¸¡à¹‡à¸”
Â  Â  Â  Â  Â  Â  let combo = { h3: 0, h2: targetPillValue * 2, total: targetPillValue * 2, type: '2mg' };
Â  Â  Â  Â  Â  Â  if (pillChoice === '2mg_fixed_1dayoff') combo.h2 = Math.round(targetPillValue); // à¹€à¸¡à¹‡à¸”à¹€à¸•à¹‡à¸¡
Â  Â  Â  Â  Â  Â  const totalPills = Math.ceil(combo.h2 * (pillChoice === '2mg_fixed_1dayoff' ? 1 : 0.5) * (days / 7));
Â  Â  Â  Â  Â  Â  plansHTML += buildPlanHTML("à¹ƒà¸Šà¹‰à¹€à¸¡à¹‡à¸” 2 mg à¹€à¸—à¹ˆà¸²à¸™à¸±à¹‰à¸™", combo, weeklyDose, displayMode, 0, totalPills, 1);
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  // à¹ƒà¸Šà¹‰à¸—à¸±à¹‰à¸‡ 2 à¹à¸¥à¸° 3 mg
Â  Â  Â  Â  Â  Â  let combo1 = findBestCombo(targetWeeklyDose);
Â  Â  Â  Â  Â  Â  const total3PillCount1 = Math.ceil(combo1.h3 * (days / 7));
Â  Â  Â  Â  Â  Â  const total2PillCount1 = Math.ceil(combo1.h2 * (days / 7));
Â  Â  Â  Â  Â  Â  plansHTML += buildPlanHTML("à¸•à¸±à¸§à¹€à¸¥à¸·à¸­à¸à¸à¸²à¸£à¸ˆà¹ˆà¸²à¸¢à¸¢à¸² 2 & 3 mg", combo1, weeklyDose, displayMode, total3PillCount1, total2PillCount1, 1);

Â  Â  Â  Â  Â  Â  // 2. à¸—à¸²à¸‡à¹€à¸¥à¸·à¸­à¸à¸—à¸µà¹ˆ 2 (à¸•à¸±à¸§à¹€à¸¥à¸·à¸­à¸à¸„à¸§à¸²à¸¡à¹à¸¡à¹ˆà¸™à¸¢à¸³à¸•à¹ˆà¸³à¸à¸§à¹ˆà¸²)
Â  Â  Â  Â  Â  Â  let totalPillsHalf = roundHalf(targetWeeklyDose / 2); // à¸ˆà¸³à¸™à¸§à¸™à¸„à¸£à¸¶à¹ˆà¸‡à¹€à¸¡à¹‡à¸” 2mg (à¸ªà¸¡à¸¡à¸¸à¸•à¸´)
Â  Â  Â  Â  Â  Â  let combo2 = { h3: 0, h2: totalPillsHalf * 2, total: totalPillsHalf * 2, type: '2mg' };
Â  Â  Â  Â  Â  Â  const total2PillCount2 = Math.ceil(totalPillsHalf * (days / 7));
Â  Â  Â  Â  Â  Â  plansHTML += buildPlanHTML("à¸—à¸²à¸‡à¹€à¸¥à¸·à¸­à¸: à¹ƒà¸Šà¹‰à¹€à¸¡à¹‡à¸” 2 mg (à¸­à¸²à¸ˆà¸¡à¸µà¸„à¸£à¸¶à¹ˆà¸‡à¹€à¸¡à¹‡à¸”)", combo2, weeklyDose, displayMode, 0, total2PillCount2, 2);

Â  Â  Â  Â  Â  Â  // 3. à¸—à¸²à¸‡à¹€à¸¥à¸·à¸­à¸à¸—à¸µà¹ˆ 3 (à¸•à¸±à¸§à¹€à¸¥à¸·à¸­à¸à¸„à¸§à¸²à¸¡à¹à¸¡à¹ˆà¸™à¸¢à¸³à¸•à¹ˆà¸³à¸à¸§à¹ˆà¸²)
Â  Â  Â  Â  Â  Â  let totalPillsThird = roundHalf(targetWeeklyDose / 3); // à¸ˆà¸³à¸™à¸§à¸™à¸„à¸£à¸¶à¹ˆà¸‡à¹€à¸¡à¹‡à¸” 3mg (à¸ªà¸¡à¸¡à¸¸à¸•à¸´)
Â  Â  Â  Â  Â  Â  let combo3 = { h3: totalPillsThird * 2, h2: 0, total: totalPillsThird * 3, type: '3mg' };
Â  Â  Â  Â  Â  Â  const total3PillCount3 = Math.ceil(totalPillsThird * (days / 7));
Â  Â  Â  Â  Â  Â  plansHTML += buildPlanHTML("à¸—à¸²à¸‡à¹€à¸¥à¸·à¸­à¸: à¹ƒà¸Šà¹‰à¹€à¸¡à¹‡à¸” 3 mg (à¸­à¸²à¸ˆà¸¡à¸µà¸„à¸£à¸¶à¹ˆà¸‡à¹€à¸¡à¹‡à¸”)", combo3, weeklyDose, displayMode, total3PillCount3, 0, 3);
Â  Â  Â  Â  }

Â  Â  Â  Â  plansDiv.innerHTML = plansHTML;
Â  Â  Â  Â  tablesSection.style.display = 'block';

Â  Â  Â  Â  // à¸‹à¸´à¸‡à¸„à¹Œà¸„à¹ˆà¸² Weekly Dose/Days à¹„à¸›à¸—à¸µà¹ˆ Calculator à¸”à¹‰à¸²à¸™à¸¥à¹ˆà¸²à¸‡ (à¹€à¸à¸·à¹ˆà¸­à¸„à¸§à¸²à¸¡à¸ªà¸°à¸”à¸§à¸)
Â  Â  Â  Â  document.getElementById('initialWeeklyDose').value = targetWeeklyDose.toFixed(1);
Â  Â  Â  Â  document.getElementById('dispenseDays').value = days;
Â  Â  Â  Â  calculateComparison(false); // à¹€à¸£à¸µà¸¢à¸à¸„à¸³à¸™à¸§à¸“à¹à¸šà¸šà¹„à¸¡à¹ˆà¸•à¹‰à¸­à¸‡à¹à¸ªà¸”à¸‡ alert
Â  Â  }

Â  Â  // --- Event Listeners à¹€à¸”à¸´à¸¡ (à¹€à¸£à¸µà¸¢à¸à¹ƒà¸Šà¹‰ showResults) ---
Â  Â  document.getElementById('form').addEventListener('input', showResults);
Â  Â Â 
Â  Â  // à¹€à¸£à¸´à¹ˆà¸¡à¸•à¹‰à¸™à¹à¸ªà¸”à¸‡à¸œà¸¥à¸«à¸²à¸à¸¡à¸µà¸„à¹ˆà¸²à¹€à¸£à¸´à¹ˆà¸¡à¸•à¹‰à¸™
Â  Â  showResults();
});
</script>
</body>
</html>
